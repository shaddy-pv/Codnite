# Codnite Production Environment Configuration
# =============================================

# Application Environment
NODE_ENV=production
PORT=3000
APP_NAME=Codnite
APP_VERSION=1.0.0

# Domain Configuration
APP_URL=https://codnite.com
FRONTEND_URL=https://app.codnite.com
API_URL=https://api.codnite.com
ADMIN_URL=https://admin.codnite.com
MONITORING_URL=https://monitoring.codnite.com

# Database Configuration (Production PostgreSQL)
DATABASE_URL=postgresql://codnite_prod:${DB_PASSWORD}@${DB_HOST}:5432/codnite_production
POSTGRES_DB=codnite_production
POSTGRES_USER=codnite_prod
POSTGRES_PASSWORD=${DB_PASSWORD}
POSTGRES_HOST=${DB_HOST}
POSTGRES_PORT=5432
POSTGRES_SSL=true
POSTGRES_SSL_REJECT_UNAUTHORIZED=true

# Connection Pool Settings
MAX_CONNECTIONS=50
MIN_CONNECTIONS=10
CONNECTION_TIMEOUT=2000
QUERY_TIMEOUT=10000
STATEMENT_TIMEOUT=10000
IDLE_TIMEOUT=30000

# Redis Configuration (Production Redis Cloud)
REDIS_URL=redis://${REDIS_USER}:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}
REDIS_HOST=${REDIS_HOST}
REDIS_PORT=${REDIS_PORT}
REDIS_PASSWORD=${REDIS_PASSWORD}
REDIS_USER=${REDIS_USER}
REDIS_DB=0
REDIS_CONNECT_TIMEOUT=5000
REDIS_COMMAND_TIMEOUT=5000
REDIS_RETRY_DELAY=1000
REDIS_MAX_RETRIES=3

# Authentication & Security
JWT_SECRET=${JWT_SECRET}
JWT_EXPIRES_IN=1h
JWT_REFRESH_EXPIRES_IN=7d
JWT_ISSUER=codnite
JWT_AUDIENCE=codnite-users
SESSION_SECRET=${SESSION_SECRET}
BCRYPT_ROUNDS=12

# Rate Limiting (Production Settings)
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=1000
AUTH_RATE_LIMIT_MAX_REQUESTS=10
UPLOAD_RATE_LIMIT_MAX_REQUESTS=5
API_RATE_LIMIT_MAX_REQUESTS=200

# CORS Configuration
CORS_ORIGIN=https://app.codnite.com
ALLOWED_ORIGINS=https://app.codnite.com,https://codnite.com,https://www.codnite.com
CORS_CREDENTIALS=true
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS,PATCH
CORS_HEADERS=Content-Type,Authorization,X-Requested-With,Accept,Origin

# File Upload Configuration
MAX_FILE_SIZE=10485760
UPLOAD_PATH=/var/www/codnite/uploads
ALLOWED_MIME_TYPES=image/jpeg,image/png,image/gif,image/webp,application/pdf,text/plain
FILE_STORAGE_TYPE=s3
FILE_STORAGE_PATH=s3://codnite-production-uploads

# AWS S3 Configuration
AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID}
AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY}
AWS_REGION=us-east-1
AWS_S3_BUCKET=codnite-production-uploads
AWS_S3_ENDPOINT=https://s3.amazonaws.com
AWS_CLOUDFRONT_DISTRIBUTION_ID=${CLOUDFRONT_DISTRIBUTION_ID}

# CDN Configuration
CDN_PROVIDER=cloudfront
CDN_URL=https://cdn.codnite.com
CLOUDINARY_CLOUD_NAME=${CLOUDINARY_CLOUD_NAME}
CLOUDINARY_API_KEY=${CLOUDINARY_API_KEY}
CLOUDINARY_API_SECRET=${CLOUDINARY_API_SECRET}

# Email Configuration (SendGrid)
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_SECURE=true
SMTP_USER=apikey
SMTP_PASS=${SENDGRID_API_KEY}
FROM_EMAIL=noreply@codnite.com
FROM_NAME=Codnite Team
EMAIL_TEMPLATES_PATH=/var/www/codnite/templates/email

# Monitoring & Logging
LOG_LEVEL=warn
LOG_FORMAT=json
LOG_FILE_PATH=/var/log/codnite/app.log
LOG_ROTATION=true
LOG_MAX_SIZE=100MB
LOG_MAX_FILES=10

# Metrics & Monitoring
ENABLE_METRICS=true
METRICS_PORT=9090
PROMETHEUS_ENDPOINT=/api/metrics
GRAFANA_PORT=3001
GRAFANA_USERNAME=admin
GRAFANA_PASSWORD=${GRAFANA_PASSWORD}

# Sentry Error Tracking
SENTRY_DSN=${SENTRY_DSN}
SENTRY_ENVIRONMENT=production
SENTRY_RELEASE=${APP_VERSION}
SENTRY_SAMPLE_RATE=0.1

# New Relic APM
NEW_RELIC_LICENSE_KEY=${NEW_RELIC_LICENSE_KEY}
NEW_RELIC_APP_NAME=Codnite-Production
NEW_RELIC_DISTRIBUTED_TRACING_ENABLED=true

# Security Configuration
SECURITY_HEADERS=true
CSP_POLICY=default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.codnite.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; img-src 'self' data: https: blob:; font-src 'self' https://fonts.gstatic.com; connect-src 'self' https://api.codnite.com wss://api.codnite.com; frame-ancestors 'self'; object-src 'none'; base-uri 'self';
HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true
HSTS_PRELOAD=true
XSS_PROTECTION=true
X_FRAME_OPTIONS=SAMEORIGIN
X_CONTENT_TYPE_OPTIONS=nosniff
REFERRER_POLICY=strict-origin-when-cross-origin
PERMISSIONS_POLICY=geolocation=(), microphone=(), camera=(), payment=(), usb=()

# SSL/TLS Configuration
SSL_CERT_PATH=/etc/ssl/certs/codnite.crt
SSL_KEY_PATH=/etc/ssl/private/codnite.key
SSL_ENABLED=true
SSL_PORT=443
SSL_REDIRECT=true

# Performance Configuration
ENABLE_CACHING=true
CACHE_TTL=3600
CACHE_MAX_MEMORY=2gb
CACHE_EVICTION_POLICY=allkeys-lru
COMPRESSION_ENABLED=true
COMPRESSION_LEVEL=6
COMPRESSION_THRESHOLD=1024

# Database Optimization
DB_QUERY_TIMEOUT=30000
DB_CONNECTION_POOL_SIZE=20
DB_IDLE_TIMEOUT=30000
DB_STATEMENT_TIMEOUT=30000

# Backup Configuration
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_PATH=/var/backups/codnite
BACKUP_COMPRESSION=true
BACKUP_ENCRYPTION=true
BACKUP_S3_BUCKET=codnite-backups

# External Services
GITHUB_CLIENT_ID=${GITHUB_CLIENT_ID}
GITHUB_CLIENT_SECRET=${GITHUB_CLIENT_SECRET}
GOOGLE_CLIENT_ID=${GOOGLE_CLIENT_ID}
GOOGLE_CLIENT_SECRET=${GOOGLE_CLIENT_SECRET}
LINKEDIN_CLIENT_ID=${LINKEDIN_CLIENT_ID}
LINKEDIN_CLIENT_SECRET=${LINKEDIN_CLIENT_SECRET}

# Analytics Configuration
GOOGLE_ANALYTICS_ID=${GOOGLE_ANALYTICS_ID}
GOOGLE_TAG_MANAGER_ID=${GOOGLE_TAG_MANAGER_ID}
MIXPANEL_TOKEN=${MIXPANEL_TOKEN}
HOTJAR_ID=${HOTJAR_ID}

# Payment Configuration (Stripe)
STRIPE_PUBLISHABLE_KEY=${STRIPE_PUBLISHABLE_KEY}
STRIPE_SECRET_KEY=${STRIPE_SECRET_KEY}
STRIPE_WEBHOOK_SECRET=${STRIPE_WEBHOOK_SECRET}
STRIPE_WEBHOOK_TOLERANCE=300

# Notification Configuration
PUSH_NOTIFICATIONS_ENABLED=true
PUSH_NOTIFICATIONS_VAPID_PUBLIC_KEY=${VAPID_PUBLIC_KEY}
PUSH_NOTIFICATIONS_VAPID_PRIVATE_KEY=${VAPID_PRIVATE_KEY}
WEBHOOK_SECRET=${WEBHOOK_SECRET}
WEBHOOK_URL=https://codnite.com/webhooks

# Feature Flags
FEATURE_FLAGS_ENABLED=true
FEATURE_FLAGS_PROVIDER=launchdarkly
FEATURE_FLAGS_SDK_KEY=${LAUNCHDARKLY_SDK_KEY}
FEATURE_CHAT_ENABLED=true
FEATURE_VIDEO_CALLS_ENABLED=false
FEATURE_AI_ASSISTANT_ENABLED=true
FEATURE_DARK_MODE_ENABLED=true
FEATURE_ANALYTICS_ENABLED=true

# Performance Monitoring
PERFORMANCE_MONITORING_ENABLED=true
PERFORMANCE_SAMPLE_RATE=0.1
PERFORMANCE_THRESHOLD_MS=1000

# Security Monitoring
SECURITY_MONITORING_ENABLED=true
SECURITY_LOG_FAILED_ATTEMPTS=true
SECURITY_BLOCK_SUSPICIOUS_IPS=true
SECURITY_RATE_LIMIT_ENABLED=true

# Health Check Configuration
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=5000
HEALTH_CHECK_RETRIES=3

# Load Balancing
LOAD_BALANCER_ENABLED=true
LOAD_BALANCER_ALGORITHM=round_robin
LOAD_BALANCER_HEALTH_CHECK=true

# Custom Configuration
CUSTOM_CONFIG_ENABLED=false
CUSTOM_CONFIG_PATH=/var/www/codnite/config/custom.json

# Environment Specific
ENVIRONMENT=production
DEBUG=false
VERBOSE_LOGGING=false
ENABLE_DEBUG_ROUTES=false
ENABLE_SWAGGER=false
